<!-- Bootstrap & FontAwesome -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />

<link rel="stylesheet" href="/css/admin/DashBoard/header.css">
<link rel="stylesheet" href="/css/admin/DashBoard/customerList.css">
<link rel="stylesheet" href="/css/admin/DashBoard/category.css">

<%- include("../../partials/admin/sidebar") %>
<%- include("../../partials/admin/header") %>
<%- include("../../partials/user/messages") %>

<div class="main-content">

  <!-- Page Header -->
  <div class="content-header">
    <h2>Brands</h2>

    <div class="search-actions">
      <form action="/admin/brands" method="get" class="search-form">
        <!-- Search -->
        <div class="search-bar">
          <input autocomplete="off" type="text" name="search" placeholder="Search Brands..."
            value="<%= search || '' %>" id="searchInput">
          <button type="submit"><i class="fas fa-search"></i></button>
        </div>

        <!-- Filter -->
        <select name="status" id="statusFilter" class="filter-select" onchange="this.form.submit()">
          <option value="all" <%=status==='all' ? 'selected' : '' %>>All</option>
          <option value="Active" <%=status==='Active' ? 'selected' : '' %>>Active</option>
          <option value="blocked" <%=status==='blocked' ? 'selected' : '' %>>Blocked</option>
        </select>

        <!-- Refresh -->
        <button type="button" class="btn-icon" onclick="location.reload()">
          <i class="fas fa-sync-alt"></i>
        </button>
      </form>
    </div>
  </div>

  <!-- Add Brand Button -->
  <div class="page-header mb-3">
    <a onclick="addBrandModal()" class="btn btn-primary"><i class="ri-add-line sub-icon"></i> Add Brand</a>
  </div>

  <!-- Brands Table -->
  <div class="table-wrapper">
    <table class="table align-middle">
      <thead>
        <tr>
          <th>#</th>
          <th>Brand</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
<tbody>
  <% brandData.forEach((brand, i)=> { %>
    <tr>
      <td><%= i + 1 %></td>

      <!-- Brand column with logo + name -->
      <td class="brand-cell">
        <img src="<%= brand.logo %>" 
             alt="<%= brand.name %> Logo" 
             class="brand-logo" 
              onerror="this.src='/images/logo-placeholder.png'">
        <span class="brand-name"><%= brand.name %></span>
      </td>

      <!-- Status -->
      <td class="status-badge-<%= brand._id %>">
        <% if ((brand.status || "").toLowerCase().trim()==="active") { %>
          <span class="badge bg-success">Active</span>
        <% } else { %>
          <span class="badge bg-danger">Blocked</span>
        <% } %>
      </td>

      <!-- Actions -->
      <td class="d-flex gap-2">
        <!-- Toggle -->
        <a href="javascript:void(0);" class="btn-action btn-view toggle-btn"
          data-id="<%= brand._id %>" data-status="<%= brand.status %>"
          title="<%= (brand.status || '').toLowerCase()==='active' ? 'Block Brand' : 'Activate Brand' %>">
          <% if ((brand.status || "").toLowerCase().trim()==="blocked") { %>
            <i class="fa fa-eye"></i>
          <% } else { %>
            <i class="fa fa-eye-slash"></i>
          <% } %>
        </a>

        <!-- Edit -->
        <a class="btn-action btn-edit"
           onclick="editBrand('<%= brand._id %>')"
           title="Edit Brand">
         <i class="fa fa-edit"></i>
        </a>


        <!-- Delete -->
        <a class="btn-action btn-delete" onclick="deleteBrand('<%= brand._id %>')" title="Delete Brand">
          <i class="fa fa-trash"></i>
        </a>
      </td>
    </tr>
  <% }) %>
</tbody>

    </table>
  </div>

  <%- include("../../partials/admin/pageNavigation") %>
</div>


<script src="/js/admin/Home/brand.js"></script>
