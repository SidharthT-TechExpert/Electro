<!-- Bootstrap & FontAwesome -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />

<link rel="stylesheet" href="/css/admin/DashBoard/header.css">
<link rel="stylesheet" href="/css/admin/DashBoard/customerList.css">

<%- include("../../partials/admin/sidebar") %>
  <%- include("../../partials/admin/header") %>
    <%- include("../../partials/user/messages") %>

      <main class="main-content">
          <%- include("../../partials/admin/subHeader",{ pageTitle:"Customer Management" }) %>
        <!-- Table -->
        <div class="table-wrapper">
          <table class="table">
            <thead>
              <tr>
                <th>#</th>
                <th>Name</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <% if (customers.length> 0) { %>
                <% customers.forEach((customer, index)=> { %>
                  <tr>
                    <td>
                      <%= index + 1 %>
                    </td>
                    <td>
                      <%= customer.name %>
                    </td>
                    <td>
                      <%= customer.email %>
                    </td>
                    <td>
                      <%= customer.phone || "N/A" %>
                    </td>
                    <td>
                      <span class="status-badge-<%= customer.id %>">
                        <% if(customer?.isBlocked){ %>
                          <span class="badge badge-danger">Blocked</span>
                          <% } else { %>
                            <span class="badge badge-success">Active</span>
                            <% } %>
                      </span>
                    </td>
                    <td>
                      <% if(customer?.isBlocked){ %>
                        <button data-id="<%= customer.id %>" onclick="Blocked('<%= customer.id %>', true, this)"
                          class="btn-success">
                          <i class="fas fa-unlock"></i> Unblock
                        </button>
                        <% } else { %>
                          <button data-id="<%= customer.id %>" onclick="Blocked('<%= customer.id %>', false, this)"
                            class="btn-danger">
                            <i class="fas fa-ban"></i> Block
                          </button>
                          <% } %>
                    </td>
                  </tr>
                  <% }) %>
                    <% } else { %>
                      <tr class="no-data">
                        <td colspan="6" class="text-center">
                          <i class="fas fa-users-slash fa-2x mb-2 text-muted"></i>
                          <div class="fw-bold">No customers found</div>
                          <div class="small text-muted">Try adjusting your search or filters.</div>
                        </td>
                      </tr>
                      <% } %>
            </tbody>
          </table>
        </div>

<%- include("../../partials/admin/pageNavigation") %>
      </main>

      <script src="/js/admin/Home/customer.js"></script>